<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TestVidy</title>
    <base href="/">
    <link rel="shortcut icon" href="image/favicon.png" type="image/x-icon">
    <!-- Bootstrap , fonts & icons  -->
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./fonts/icon-font/css/style.css">
    <link rel="stylesheet" href="./fonts/typography-font/typo.css">
    <link rel="stylesheet" href="./fonts/fontawesome-5/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Plugin'stylesheets  -->
    <link rel="stylesheet" href="./plugins/aos/aos.min.css">
    <link rel="stylesheet" href="./plugins/slick/slick.min.css">
    <!-- Vendor stylesheets  -->
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/testingSite.css">
    <link rel="stylesheet" href="./css/homeTesting.css">
    <link rel="stylesheet" href="./css/revertBooking.css">
    <!-- Custom stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body data-theme-mode-panel-active data-theme="light" style="font-family: 'Mazzard H';">
    <div class="site-wrapper overflow-hidden position-relative">
        <!-- Site Header -->
        <!-- Preloader -->
        <!-- <div id="loading">
<div class="preloader">
 <img src="./image/preloader.gif" alt="preloader">
</div>
</div>    -->

        <!--        NavBar-->
        <div th:insert="fragments/nav_bar :: nav_bar"></div>

        <!-- Hero Area -->
        <div class="hero-area-l11 position-relative z-index-1 overflow-hidden">
            <div class="container position-relative">
                <div class="row position-relative justify-content-center">
                    <div class="col-xl-8 col-lg-9 col-md-12 order-lg-1 order-1" data-aos="fade-up"
                        data-aos-duration="500" data-aos-once="true">
                        <div class="content">

                            <div class="content-area-l-11-2">
                                <div class="container">
                                    <div
                                        class="row align-items-center justify-content-lg-between justify-content-center">
                                        <div class="col-xxl-10 col-xl-11 col-lg-11 col-md-9 order-lg-1 order-1"
                                            data-aos="fade-right" data-aos-duration="800" data-aos-once="true">
                                            <div class="content section-heading-5">

                                                <h2>Previous Bookings</h2>


                                                <div class="d-flex content-l-11-3-card">
                                                    <div class="content-body">

                                                        <div class="row">
                                                            <button class="tablink" onclick="openTab('Booking1')"
                                                                id="defaultOpen">Booking Ver
                                                                01</button>
                                                            <button class="tablink1"
                                                                th:if="${targetBooking.getAdditionalInfo().getBookingVersions().size() > 1}"
                                                                onclick="openTab('Booking2')">Booking Ver 02</button>
                                                            <button class="tablink2"
                                                                th:if="${targetBooking.getAdditionalInfo().getBookingVersions().size() > 2}"
                                                                onclick="openTab('Booking3')">Booking Ver 03</button>
                                                        </div>

                                                        <br>

                                                        <div id="Booking1" class="tabcontent">

                                                            <form
                                                                th:action="@{'/booking/' + ${targetBooking.getId()} + '/revert/0'}"
                                                                th:method="put">
                                                                <table>
                                                                    <tr>
                                                                        <th style="width:20%">Booking Version</th>
                                                                        <th style="width:40%">Current</th>
                                                                        <th style="width:40%">Previous Booking Version 1</th>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Booking ID</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getId()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getId()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Patient Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getPatient().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getPatient().getFamilyName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getPatient().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getPatient().getFamilyName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Customer Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCustomer().getGivenName() + ' ' + targetBooking.getCustomer().getFamilyName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCustomer().getGivenName() + ' ' + targetBooking.getCustomer().getFamilyName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Administerer Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getAdministerer() != null} ? (${targetBooking.getCovidTests()[0].getAdministerer().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getAdministerer().getFamilyName()}) : '-'"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getAdministerer() != null} ? (${targetBooking.getCovidTests()[0].getAdministerer().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getAdministerer().getFamilyName()}) : '-'"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="table-info">
                                                                        <td>Start Datetime</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getStartTime()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getAdditionalInfo().getBookingVersions().get(0).getStartTimeInJava()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="table-info">
                                                                        <td>Testing Site</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getTestingSite().getName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getAdditionalInfo().getBookingVersions().get(0).getTestingSiteName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Covid Test Type</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getType()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getType()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Status</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getStatus()}"></span>
                                                                        </td>
                                                                        <td><span th:if="${T(fit3077.lab02team14.assignment2.services.Util).checkIfLapsed(targetBooking.getAdditionalInfo().getBookingVersions().get(0).getStartTimeInJavaDateTime())}"
                                                                                  th:text="LAPSED"></span>
                                                                            <span th:if="${!T(fit3077.lab02team14.assignment2.services.Util).checkIfLapsed(targetBooking.getAdditionalInfo().getBookingVersions().get(0).getStartTimeInJavaDateTime())}"
                                                                                  th:text="INITIATED"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>SMS Pin</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getSmsPin()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getSmsPin()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Notes</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getNotes()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getNotes()}"></span>
                                                                        </td>
                                                                    </tr>

                                                                </table>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-secondary" type="submit"
                                                                        value="Put">Revert to
                                                                        Booking 1</button>
                                                                </div>
                                                            </form>
                                                        </div>

                                                        <div id="Booking2" class="tabcontent"
                                                            th:if="${targetBooking.getAdditionalInfo().getBookingVersions().size() > 1}">

                                                            <form
                                                                th:action="@{'/booking/' + ${targetBooking.getId()} + '/revert/1'}"
                                                                th:method="put">
                                                                <table>
                                                                    <tr>
                                                                        <th style="width:20%">Booking Version</th>
                                                                        <th style="width:40%">Current</th>
                                                                        <th style="width:40%">Previous Booking Version 2</th>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Booking ID</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getId()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getId()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Patient Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getPatient().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getPatient().getFamilyName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getPatient().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getPatient().getFamilyName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Customer Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCustomer().getGivenName() + ' ' + targetBooking.getCustomer().getFamilyName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCustomer().getGivenName() + ' ' + targetBooking.getCustomer().getFamilyName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Administerer Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getAdministerer() != null} ? (${targetBooking.getCovidTests()[0].getAdministerer().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getAdministerer().getFamilyName()}) : '-'"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getAdministerer() != null} ? (${targetBooking.getCovidTests()[0].getAdministerer().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getAdministerer().getFamilyName()}) : '-'"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="table-info">
                                                                        <td>Start Datetime</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getStartTime()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getAdditionalInfo().getBookingVersions().get(1).getStartTimeInJava()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="table-info">
                                                                        <td>Testing Site</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getTestingSite().getName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getAdditionalInfo().getBookingVersions().get(1).getTestingSiteName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Covid Test Type</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getType()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getType()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Status</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getStatus()}"></span>
                                                                        </td>
                                                                        <td><span th:if="${T(fit3077.lab02team14.assignment2.services.Util).checkIfLapsed(targetBooking.getAdditionalInfo().getBookingVersions().get(1).getStartTimeInJavaDateTime())}"
                                                                                  th:text="LAPSED"></span>
                                                                            <span th:if="${!T(fit3077.lab02team14.assignment2.services.Util).checkIfLapsed(targetBooking.getAdditionalInfo().getBookingVersions().get(1).getStartTimeInJavaDateTime())}"
                                                                                  th:text="INITIATED"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>SMS Pin</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getSmsPin()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getSmsPin()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Notes</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getNotes()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getNotes()}"></span>
                                                                        </td>
                                                                    </tr>

                                                                </table>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-secondary" type="submit"
                                                                        value="Put">Revert to
                                                                        Booking 2</button>
                                                                </div>
                                                            </form>
                                                        </div>

                                                        <div id="Booking3" class="tabcontent"
                                                            th:if="${targetBooking.getAdditionalInfo().getBookingVersions().size() > 2}">

                                                            <form
                                                                th:action="@{'/booking/' + ${targetBooking.getId()} + '/revert/2'}"
                                                                th:method="put">
                                                                <table>
                                                                    <tr>
                                                                        <th style="width:20%">Booking Version</th>
                                                                        <th style="width:40%">Current</th>
                                                                        <th style="width:40%">Previous Booking Version 3</th>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Booking ID</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getId()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getId()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Patient Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getPatient().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getPatient().getFamilyName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getPatient().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getPatient().getFamilyName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Customer Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCustomer().getGivenName() + ' ' + targetBooking.getCustomer().getFamilyName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCustomer().getGivenName() + ' ' + targetBooking.getCustomer().getFamilyName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Administerer Name</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getAdministerer() != null} ? (${targetBooking.getCovidTests()[0].getAdministerer().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getAdministerer().getFamilyName()}) : '-'"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getAdministerer() != null} ? (${targetBooking.getCovidTests()[0].getAdministerer().getGivenName() + ' ' + targetBooking.getCovidTests()[0].getAdministerer().getFamilyName()}) : '-'"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="table-info">
                                                                        <td>Start Datetime</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getStartTime()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getAdditionalInfo().getBookingVersions().get(2).getStartTimeInJava()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="table-info">
                                                                        <td>Testing Site</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getTestingSite().getName()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getAdditionalInfo().getBookingVersions().get(2).getTestingSiteName()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Covid Test Type</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getType()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getCovidTests()[0].getType()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Status</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getStatus()}"></span>
                                                                        </td>
                                                                        <td><span th:if="${T(fit3077.lab02team14.assignment2.services.Util).checkIfLapsed(targetBooking.getAdditionalInfo().getBookingVersions().get(2).getStartTimeInJavaDateTime())}"
                                                                                  th:text="LAPSED"></span>
                                                                            <span th:if="${!T(fit3077.lab02team14.assignment2.services.Util).checkIfLapsed(targetBooking.getAdditionalInfo().getBookingVersions().get(2).getStartTimeInJavaDateTime())}"
                                                                                  th:text="INITIATED"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>SMS Pin</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getSmsPin()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getSmsPin()}"></span>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Notes</td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getNotes()}"></span>
                                                                        </td>
                                                                        <td><span
                                                                                th:text="${targetBooking.getNotes()}"></span>
                                                                        </td>
                                                                    </tr>

                                                                </table>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-secondary" type="submit"
                                                                        value="Put">Revert to
                                                                        Booking 3</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-shape-l11-1 d-none d-md-block">
                <img src="./image/l2/hero-shape-1.svg" alt="">
            </div>
            <div class="hero-shape-l11-2 d-none d-md-block">
                <img src="./image/l2/hero-shape-2.png" alt="">
            </div>
        </div>

        <!--footer-->
        <div th:insert="fragments/footer :: footer"></div>
    </div>
    </section>

    <!--Modal-->
    <div th:insert="fragments/loginModal :: loginModal"></div>
    <div th:insert="fragments/logoutModal :: logoutModal"></div>

    <!-- Vendor Scripts -->
    <script src="js/vendor.min.js"></script>
    <!-- Plugin's Scripts -->
    <script src="./plugins/aos/aos.min.js"></script>
    <script src="./plugins/slick/slick.min.js"></script>
    <script src="./plugins/menu/menu.js"></script>
    <!-- Activation Script -->
    <script src="js/custom.js"></script>
    <script src="js/bookings.js"></script>
    <script src="js/homeTesting.js"></script>
    <script src="js/revertBooking.js"></script>
</body>

</html>